# tech-task
Техническое задание на взаимодействие с пользователем (JDBC, PostgreSQL, JUnit 5, Mockito, Log4j, Lombok)

Разработка изначально велась с использованием базы postgres. Далее в зависимостях была подключена база H2 и все тесты выполнялись на ней при условии, что она пуста.
В application.properties можно указать как H2 (jdbc:h2:~/test), так и postgres БД.
Таким образом, была предпринята попытка эмуляции работы с реальным приложением, когда тесты со слоем DAO могут быть чреваты последствиями.

[INFO] Results:
[INFO]
[WARNING] Tests run: 101, Failures: 0, Errors: 0, Skipped: 1


TASK 1:  ПОИСК В РЕПОЗИТОРИИ АККАУНТА ПОЛЬЗОВАТЕЛЯ ПО ИМЕНИ

На уровне сервисов реализован метод: get(String username).
        

TASK 2:  ИЗМЕНЕНИЕ У УЧЕТНОЙ ЗАПИСИ ЛЮБОГО АТРИБУТА

На уровне сервисов реализован метод: update(UpdateUserDto userDto)
Объект проходит:
            1. валидацию: проверки username на null и пробелы/табуляции; на существование пользователя в БД; на отсутствие остальных полей при введенем пользователе;
                          на существование пользователя, на чье имя хотим изменить текущее; на правильный формат (dd-MM-yyyy) даты; на соответсвия коду гендера (1 - MALE, 2 - FEMALE).
                          (если валидация не проходит, то выбрасывается соответсвующей исключение ValidationException)
            2. маппинг: так как данные могут приходить с прикладного уровня, то, скорее всего, это будут строки. Для этого осуществляется маппинг на entity, с которой работает слой DAO;
            3. вызов соответсвующего метода из слоя DAO.
            
            
TASK 4:  ПОЛУЧИТЬ СПИСОК ВСЕХ ПОЛЬЗОВАТЕЛЕЙ, А ЗАТЕМ С ПОМОЩЬЮ Stream API НАЙТИ:
         а) имена всех пользователей, которые младше 20 лет;
          б) посчитать количество пользователей, у которых фамилия оканчивается на "ов".

На уровне сервисов реализованы методы:
getAll() - получение всех пользователей;
filterByAge() - получение пользоваталей моложе 20 лет;
filterByLastNamePostfix() - получение пользователей, чьи фамилии заканчиваются на "ов".
